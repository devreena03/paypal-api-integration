<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="ISO-8859-1" name="viewport" content="width=device-width, initial-scale=1">
  <title>EC BT demo</title>

  <script src="https://www.paypalobjects.com/api/checkout.js" data-version-4></script>
  <script src="https://js.braintreegateway.com/web/3.25.0/js/client.min.js"></script>
  <script src="https://js.braintreegateway.com/web/3.25.0/js/paypal-checkout.min.js"></script>

</head>

<body>
     <label>ECBT-Web integration</label>
     <div id="paypal-button-container-ecbt"></div>
<script>
paypal.Button.render({
    braintree: braintree,
    client: {
      sandbox: paypal.request.get('https://bt-direct.herokuapp.com/payments/client_token'),
      production: paypal.request.get('https://bt-direct.herokuapp.com/payments/client_token')
    },
    env: 'sandbox', //'production'/'sandbox'
    commit: true,
  
    payment: function (data, actions) {
      return actions.braintree.create({
        flow: 'checkout', // Required
        amount: 1.00, // Required
        currency: 'INR' // Required
      });
    },
  
    onAuthorize: function (payload) {
        console.log(payload.nonce);
        var EXECUTE_URL = 'https://bt-direct.herokuapp.com/payments/checkout';
        var executeValues = {
            nonce: payload.nonce,
            amount: 1.00
        };
        return paypal.request.post(EXECUTE_URL, executeValues)
            .then(function (res) {
                window.alert('Payment Complete!');
            });
    },
  }, '#paypal-button-container-ecbt');
</script>
 </body>

</html>